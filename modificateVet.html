<!doctype html>
<html>

<head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="shortcut icon" href="https://i.ibb.co/ckDdYBB/Ciudadados-de-4-Patas.png">
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta2/dist/css/bootstrap.min.css" rel="stylesheet"
          integrity="sha384-BmbxuPwQa2lc/FVzBcNJ7UAyJxM6wuqIj61tLrc4wSX0szH/Ev+nYRRuWlolflfl" crossorigin="anonymous">
    <link href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet"
          integrity="sha384-wvfXpqpZZVQGK6TAh5PVlGOfQNHSoD2xbE+QkPxCAFlNEevoEH3Sl0sibVcOQVnN" crossorigin="anonymous">
    <link rel="stylesheet" href="css/vet.css">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.8.1/css/all.css">
    <title>Modificate vet</title>
</head>

<body>
<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js"
        integrity="sha384-IQsoLXl5PILFhosVNubq5LC7Qb9DXgDA9i+tQ8Zj3iwWAwPtgFTxbJ8NT4GN1R8p"
        crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.1/dist/js/bootstrap.min.js"
        integrity="sha384-Atwg2Pkwv9vp0ygtn1JAojH0nYbwNJLPhwyoVbhoPwBhjQPR5VtM2+xf0Uwh9KtT"
        crossorigin="anonymous"></script>

<header>
    <img class="logo" src="https://i.ibb.co/ckDdYBB/Ciudadados-de-4-Patas.png" alt="logo">
    <nav>
        <ul class="nav_links">
            <li><a href="funtionVet.html">Home</a></li>
            <li><a href="visitPetVet.html" id="">Create Visit</a></li>
            <li><a href="allVisitsVet.html">Your visit</a></li>
        </ul>
    </nav>
    <a class="cta" href="contact.html">
        <button>Contact</button>
    </a>
    <nav>
        <ul class="nav_links">
            <li><a href="index.html" id="bton-signin">Log out</a></li>
        </ul>
    </nav>
</header>

<section>
    <div class="box">
        <h2>Modificate Vet</h2>
        <form action="" style="max-width:500px;margin:auto">
            <div class="inputBox">
                <input type="text" name="adress" id="address" required onkeyup="this.setAttribute('value', this.value);"
                       value="">
                <label>Adress</label>
            </div>

            <div class="inputBox">
                <input type="text" name="neighborhood" id="neighborhood" required
                       onkeyup="this.setAttribute('value', this.value);"
                       value="">
                <label>Neighborhood</label>
            </div>

            <input type="button" name="sign-in" value="Modificate vet" onclick="updateVet()">
        </form>
    </div>
</section>
<script src="js/popup.js"></script>
<script>
    function updateVet() {
        var address = document.getElementById("address").value
        var neighborhood = document.getElementById("neighborhood").value
        var vet_id = leerCookie("userName")
        console.log(vet_id)
        var uri = 'http://localhost:8080/Final_proyect_prog-1.0-SNAPSHOT/api/userApp/vet/' + vet_id + '/' + address + '/' + neighborhood
        var http = new XMLHttpRequest()
        http.open("PUT", uri, true)
        http.onreadystatechange = () => {
            if (http.readyState == 4 && http.status == 200) {
                alert("vet update succesfully")
            } else if (http.readyState == 4 && http.status != 200) {
                alert('errorr !!!')
            }
        }
        http.send()
    }

    function leerCookie(nombre) {
        var lista = document.cookie.split(";");
        for (i in lista) {
            var busca = lista[i].search(nombre);
            if (busca > -1) {
                micookie = lista[i]
            }
        }
        var igual = micookie.indexOf("=");
        var valor = micookie.substring(igual + 1);
        return valor
    }
</script>

</body>
</html>