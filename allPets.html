<!doctype html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="shortcut icon" href="https://i.ibb.co/ckDdYBB/Ciudadados-de-4-Patas.png">
  <!-- Bootstrap CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BmbxuPwQa2lc/FVzBcNJ7UAyJxM6wuqIj61tLrc4wSX0szH/Ev+nYRRuWlolflfl" crossorigin="anonymous">
  <link rel="stylesheet" href="css/allPets.css">
  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.8.1/css/all.css">
  <title>Pets Table</title>
</head>

<body>
<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js" integrity="sha384-IQsoLXl5PILFhosVNubq5LC7Qb9DXgDA9i+tQ8Zj3iwWAwPtgFTxbJ8NT4GN1R8p" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.1/dist/js/bootstrap.min.js" integrity="sha384-Atwg2Pkwv9vp0ygtn1JAojH0nYbwNJLPhwyoVbhoPwBhjQPR5VtM2+xf0Uwh9KtT" crossorigin="anonymous"></script>

<header>
  <img class="logo" src="https://i.ibb.co/ckDdYBB/Ciudadados-de-4-Patas.png" alt="logo">
  <nav>
    <ul class="nav_links">
      <li><a href="funtionOfficial.html">Home</a></li>
      <li><a href="visualizeOwner.html">Table Owner</a></li>
      <li><a href="cases.html">Table Cases</a></li>
      <li><a href="visitsOfficial.html">Table Visit</a></li>
      <li><a href="table.html">All Pets</a></li>
    </ul>
  </nav>
  <a class= "cta" href="contact.html"><button>Contact</button></a>
  <nav>
    <ul class="nav_links">
      <li><a href="index.html" id="bton-signin">Log out</a></li>
    </ul>
  </nav>
</header>

</nav>

<div class="container">
  <form action="" class="form">
      <h1 class="title">Information Pets:</h1>
      <label for="">Select option to filter</label> 
      <label for="" class="form-label">Select type visit:</label>
      <div class="input-group">
        <div class="sele">
          <select name="selectLocalidad" id="selectLocalidad" class="form-selec" required>
            <option class="form-option"></option>
            <option id="Specie" value="Specie" class="form-option">Specie</option>
            <option value="Race" class="form-option">Race</option>
            <option value="Size" class="form-option">Size</option>
            <option value="Sex" class="form-option">Sex</option>
            <option value="Sterilized" class="form-option">Sterilized</option>
          </select>
        </div>
        
          <div class="type">
            <select name="selectype" id="selectType" class="form-selec" required>
              <option class="form-option"></option>
            </select>
            <button onclick="tablePets()" type="button" class="btn btn-primary">
              <i class="fas fa-search"></i>
            </button>
        </div>
        </div>
</form>
</div>

<div class="table-container" id="table-container">
  <table class="table">
    <thead>
    <tr>

      <th>Id </th>
      <th>Specie</th>
      <th>Race</th>
      <th>Size</th>
      <th>sex</th>
      <th>Microchip</th>
      <th>sterilized</th>
    </tr>
    </thead>
    <tbody id="res">
    <tr>
    </tr>
    </tbody>
  </table>
</div>
<script>

  document.getElementById("selectLocalidad").onchange = function() {
    var xhr = new XMLHttpRequest();
    if (this.value == 'Specie') {
      xhr.onreadystatechange = function () {
        if (xhr.readyState == 4) {
          var data = JSON.parse(xhr.responseText);
          var cont = ""
          var tbodyRef = document.getElementById("selectType")
          tbodyRef.innerHTML = ""

          for (let i = 0; i < data.length; i++) {
            tbodyRef.innerHTML += `
                <option value="${data[i].specie}">${data[i].specie}</option>
                `
          }

        }
      }
      xhr.open('GET', 'http://localhost:8080/Final_proyect_prog-1.0-SNAPSHOT/api/userApp/owners/pets/filter/species', true);
      xhr.send(null)
    }else if(this.value == 'Race'){
      xhr.onreadystatechange = function () {
        if (xhr.readyState == 4) {
          var data = JSON.parse(xhr.responseText);
          var cont = ""
          var tbodyRef = document.getElementById("selectType")
          tbodyRef.innerHTML = ""

          for (let i = 0; i < data.length; i++) {
            tbodyRef.innerHTML += `
                <option value="${data[i].race}">${data[i].race}</option>
                `
          }

        }
      }
      xhr.open('GET', 'http://localhost:8080/Final_proyect_prog-1.0-SNAPSHOT/api/userApp/owners/pets/filter/race', true);
      xhr.send(null)

    }else if(this.value == 'Size'){
      xhr.onreadystatechange = function () {
        if (xhr.readyState == 4) {
          var data = JSON.parse(xhr.responseText);
          var cont = ""
          var tbodyRef = document.getElementById("selectType")
          tbodyRef.innerHTML = ""

          for (let i = 0; i < data.length; i++) {
            tbodyRef.innerHTML += `
                <option value="${data[i].size}">${data[i].size}</option>
                `
          }

        }
      }
      xhr.open('GET', 'http://localhost:8080/Final_proyect_prog-1.0-SNAPSHOT/api/userApp/owners/pets/filter/size', true);
      xhr.send(null)
    }else if(this.value == 'Sex'){
      xhr.onreadystatechange = function () {
        if (xhr.readyState == 4) {
          var data = JSON.parse(xhr.responseText);
          var cont = ""
          var tbodyRef = document.getElementById("selectType")
          tbodyRef.innerHTML = ""

          for (let i = 0; i < data.length; i++) {
            tbodyRef.innerHTML += `
                <option value="${data[i].sex}">${data[i].sex}</option>
                `
          }

        }
      }
      xhr.open('GET', 'http://localhost:8080/Final_proyect_prog-1.0-SNAPSHOT/api/userApp/owners/pets/filter/sex', true);
      xhr.send(null)

    }


  }
</script>

<script src="Js/formTable.js"></script>
<script src="Js/tableByLocation.js"></script>

</body>

</html>